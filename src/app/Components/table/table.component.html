<div class="tableIsEmpty" *ngIf="tableLines.length == 0">
  <h1>Opa, esta tabela está vazia!</h1>
</div>
<table class="table" *ngIf="tableLines.length != 0">
  <thead>
    <th class="cell" *ngFor="let column of config.columns; let i = index;">
      <div>
        <img src="{{column.svg}}">
        {{column.name}}
        <button (click)="sortList(column.type,i)" [ngClass]="sortOrder[i]?'asc':'desc'" type="button"
          title="Ordenar por {{column.name}}">
          <svg *ngIf="column.sort" width="13" height="8" viewBox="0 0 13 8" fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path d="M1.49951 1.49976L6.49994 6.50018L11.5004 1.49976" stroke="#222222" stroke-width="1.66678"
              stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </button>
      </div>
    </th>

    <th class="cell" *ngIf="actionTrigger">
      <div>
        <img *ngIf="config.actSvg" src="{{config.actSvg}}">
        <svg *ngIf="!config.actSvg" #svgElse width="19" height="18" viewBox="0 0 21 20" fill="none"
          xmlns="http://www.w3.org/2000/svg">
          <path
            d="M19.1203 7.37H18.0303C17.8903 7.37 17.7903 7.26 17.7303 7.11C17.6946 7.05491 17.6756 6.99066 17.6756 6.925C17.6756 6.85934 17.6946 6.79509 17.7303 6.74L18.5403 6C18.699 5.8473 18.8252 5.66401 18.9111 5.4612C18.9971 5.25839 19.041 5.04027 19.0403 4.82C19.0401 4.59839 18.9958 4.37905 18.9099 4.17474C18.8241 3.97043 18.6984 3.78526 18.5403 3.63L17.2003 2.26C17.0451 2.10368 16.8605 1.97962 16.6571 1.89497C16.4537 1.81031 16.2356 1.76672 16.0153 1.76672C15.795 1.76672 15.5769 1.81031 15.3735 1.89497C15.1701 1.97962 14.9855 2.10368 14.8303 2.26L14.0603 3C13.9991 3.0392 13.928 3.06004 13.8553 3.06004C13.7826 3.06004 13.7115 3.0392 13.6503 3C13.5899 2.97748 13.5372 2.93827 13.4982 2.88692C13.4593 2.83558 13.4357 2.77422 13.4303 2.71V1.68C13.4305 1.24297 13.2604 0.823057 12.956 0.509395C12.6517 0.195732 12.2371 0.0130069 11.8003 2.59345e-10H9.86029C9.4138 -7.81621e-06 8.98545 0.176672 8.6688 0.491449C8.35215 0.806226 8.17293 1.23352 8.17029 1.68V2.77C8.17029 2.91 8.06029 3.01 7.91029 3.07C7.8552 3.10573 7.79095 3.12474 7.72529 3.12474C7.65963 3.12474 7.59538 3.10573 7.54029 3.07L6.80029 2.26C6.48358 1.94517 6.05683 1.76586 5.61029 1.76C5.3902 1.76043 5.17242 1.80489 4.96977 1.89076C4.76711 1.97663 4.58369 2.10217 4.43029 2.26L3.06029 3.6C2.89941 3.75571 2.77148 3.94219 2.68411 4.14834C2.59674 4.35449 2.55171 4.5761 2.55171 4.8C2.55171 5.0239 2.59674 5.24551 2.68411 5.45166C2.77148 5.65781 2.89941 5.84429 3.06029 6L3.80029 6.74C3.8395 6.80119 3.86033 6.87233 3.86033 6.945C3.86033 7.01767 3.8395 7.08881 3.80029 7.15C3.77777 7.21038 3.73856 7.26313 3.68721 7.30208C3.63587 7.34103 3.57451 7.36458 3.51029 7.37H2.48029C2.03473 7.37 1.60741 7.547 1.29235 7.86206C0.977293 8.17712 0.800293 8.60444 0.800293 9.05V10.94C0.800285 11.3865 0.976965 11.8148 1.29174 12.1315C1.60652 12.4481 2.03381 12.6274 2.48029 12.63H3.57029C3.71029 12.63 3.81029 12.74 3.87029 12.89C3.90602 12.9451 3.92503 13.0093 3.92503 13.075C3.92503 13.1407 3.90602 13.2049 3.87029 13.26L3.06029 14C2.74546 14.3167 2.56616 14.7435 2.56029 15.19C2.55995 15.4117 2.60402 15.6312 2.68989 15.8356C2.77577 16.04 2.90171 16.2251 3.06029 16.38L4.40029 17.74C4.55552 17.8963 4.74013 18.0204 4.94351 18.105C5.14688 18.1897 5.365 18.2333 5.58529 18.2333C5.80559 18.2333 6.0237 18.1897 6.22708 18.105C6.43045 18.0204 6.61507 17.8963 6.77029 17.74L7.54029 17C7.60148 16.9608 7.67262 16.94 7.74529 16.94C7.81796 16.94 7.88911 16.9608 7.95029 17C8.01068 17.0225 8.06342 17.0617 8.10237 17.1131C8.14132 17.1644 8.16488 17.2258 8.17029 17.29V18.38C8.18584 18.8151 8.36968 19.2271 8.68307 19.5293C8.99646 19.8315 9.41493 20.0003 9.85029 20H11.7403C12.1868 20 12.6151 19.8233 12.9318 19.5086C13.2484 19.1938 13.4277 18.7665 13.4303 18.32V17.23C13.4303 17.09 13.5403 16.99 13.6903 16.93C13.7454 16.8943 13.8096 16.8753 13.8753 16.8753C13.941 16.8753 14.0052 16.8943 14.0603 16.93L14.8203 17.7C15.137 18.0148 15.5638 18.1941 16.0103 18.2C16.2304 18.1996 16.4482 18.1551 16.6508 18.0692C16.8535 17.9834 17.0369 17.8578 17.1903 17.7L18.5303 16.36C18.6866 16.2048 18.8107 16.0202 18.8953 15.8168C18.98 15.6134 19.0236 15.3953 19.0236 15.175C19.0236 14.9547 18.98 14.7366 18.8953 14.5332C18.8107 14.3298 18.6866 14.1452 18.5303 13.99L17.8003 13.26C17.7646 13.2049 17.7456 13.1407 17.7456 13.075C17.7456 13.0093 17.7646 12.9451 17.8003 12.89C17.8228 12.8296 17.862 12.7769 17.9134 12.7379C17.9647 12.699 18.0261 12.6754 18.0903 12.67H19.1803C19.6137 12.6545 20.0242 12.4721 20.3262 12.1608C20.6281 11.8496 20.798 11.4336 20.8003 11V9.06C20.8003 8.61351 20.6236 8.18516 20.3088 7.86851C19.9941 7.55186 19.5668 7.37264 19.1203 7.37V7.37ZM10.8003 13.5C10.1081 13.5 9.43137 13.2947 8.8558 12.9101C8.28022 12.5256 7.83162 11.9789 7.56671 11.3394C7.30181 10.6999 7.2325 9.99612 7.36754 9.31718C7.50259 8.63825 7.83594 8.01461 8.32542 7.52513C8.8149 7.03564 9.43854 6.7023 10.1175 6.56725C10.7964 6.4322 11.5001 6.50151 12.1397 6.76642C12.7792 7.03133 13.3259 7.47993 13.7104 8.0555C14.095 8.63108 14.3003 9.30777 14.3003 10C14.3003 10.9283 13.9315 11.8185 13.2752 12.4749C12.6188 13.1313 11.7286 13.5 10.8003 13.5V13.5Z"
            fill="#222222" />
        </svg>
        {{config.actName??'Ações'}}
      </div>
    </th>

  </thead>
  <tbody *ngFor="let item of tableLines; let j = index">
    <tr class="line">
      <td class="cell" *ngFor="let info of item.refinedLine;let i = index">
        <span class="{{config.columns[i].type}}" *ngIf="config.columns[i].type != 'date' && config.columns[i].type != 'image' && config.columns[i].type!='link' &&
          config.columns[i].type!='status'">
          {{info}}
        </span>
        <div *ngIf="config.columns[i].type == 'date'">
          <span>{{formatDate(info)}}</span>
        </div>
        <div *ngIf="config.columns[i].type == 'status'" class="status {{info.color??''}}">
          <span>{{info.text}}</span>
        </div>

        <a class="imgLink" *ngIf="config.columns[i].type == 'image'" href="{{info?.href == null ? '#' : info.href}}">
          <img class="image" userImgError src="{{info?.src == null ? info : info.src}}" alt="{{info?.alt}}">
        </a>

        <a class="link" *ngIf="config.columns[i].type == 'link'" href="{{info.href}}">
          <svg width="12" height="13" viewBox="0 0 12 13" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path
              d="M10.0952 3.73809L1.64286 12.2143C1.45238 12.4048 1.22603 12.5 0.96381 12.5C0.702222 12.5 0.47619 12.4048 0.285714 12.2143C0.0952378 12.0238 0 11.7975 0 11.5352C0 11.2737 0.0952378 11.0476 0.285714 10.8571L8.7619 2.40476H1.52381C1.25397 2.40476 1.02762 2.31365 0.844762 2.13143C0.66254 1.94857 0.571428 1.72222 0.571428 1.45238C0.571428 1.18254 0.66254 0.956191 0.844762 0.773333C1.02762 0.591111 1.25397 0.5 1.52381 0.5H11.0476C11.3175 0.5 11.5435 0.591111 11.7257 0.773333C11.9086 0.956191 12 1.18254 12 1.45238V10.9762C12 11.246 11.9086 11.4721 11.7257 11.6543C11.5435 11.8371 11.3175 11.9286 11.0476 11.9286C10.7778 11.9286 10.5517 11.8371 10.3695 11.6543C10.1867 11.4721 10.0952 11.246 10.0952 10.9762V3.73809Z"
              fill="#01B4FF" />
          </svg>
          {{info.text}}
        </a>
      </td>
      <td class="cell" *ngIf="actionTrigger">
        <div class="buttons">
          <button *ngFor="let action of config.actions" (click)="action.actFunction($event,item.line)"
            title="{{action.title}}">
            <img src="{{action.svg}}" alt="Ação">
          </button>
          <button *ngIf="config.expand" (click)="expandLabel(j)" [ngClass]="expandHandler[j]?'asc':'desc'">
            <svg width="23" height="14" viewBox="0 0 23 14" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M2.53027 2L11.5303 12L20.5303 2" stroke="#222222" stroke-width="4" stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </button>
        </div>
      </td>
    </tr>
    <tr *ngIf="config.expand" class="expandible-label" [ngStyle]="{'height':expandHandler[j]?expandLabelSize:'0'}">
      <td class="content-wrapper" [colSpan]="config.columns.length+1" [ngClass]="expandHandler[j]?'opened':'closed'">
        <div class="wrapper">
          <div class="wrapper-line">
            <app-info-block [blockData]="data[j]" blockType="vacancyInfo"></app-info-block>
            <app-info-block [blockData]="data[j]" blockType="enterpriseInfo"></app-info-block>
            <app-info-block [blockData]="data[j]" blockType="guarantee"></app-info-block>
          </div>
          <div class="wrapper-line">
            <app-info-block [blockData]="data[j]" blockType="lastAtt"></app-info-block>
            <app-info-block [blockData]="data[j]" blockType="vacancyResponsables"></app-info-block>
            <app-info-block [blockData]="data[j]" blockType="quickActions"></app-info-block>
          </div>
        </div>
        <app-stage-list [stages]="data[j].stages" [vacancyId]="data[j].ID"></app-stage-list>
      </td>
    </tr>
  </tbody>
</table>
<nav class="paginate" *ngIf="pageLength">
  <ul>
    <li>
      <button (click)="handlePagination(this.pagePos - 1)" id="previous" [attr.disabled]="pagePos == 0?'':null"
        title="{{pagePos != 0?'Voltar página':null}}">
        &#60;
      </button>
    </li>
    <li *ngIf="pagePos == (pageLength-1)">
      <button (click)="handlePagination(pagePos-2)" title="Página {{pagePos-1}}">
        {{pagePos-1}}
      </button>
    </li>
    <li *ngIf="pagePos>=1">
      <button (click)="handlePagination(pagePos-1)" id="{{1+pagePos}}" title="Página {{pagePos}}">
        {{pagePos}}
      </button>
    </li>
    <li class="selected">
      <button>
        {{pagePos+1}}
      </button>
    <li *ngIf="pagePos < (pageLength-1)">
      <button (click)="handlePagination(pagePos+1)" [attr.disabled]="pagePos == (pageLength-1)?'':null"
        title="Página {{pagePos+2}}">
        {{pagePos+2}}
      </button>
    <li *ngIf="pagePos== 0">
      <button (click)="handlePagination(pagePos+2)" [attr.disabled]="pagePos == (pageLength-1)?'':null"
        title="Página {{pagePos+3}}">
        {{pagePos+3}}</button>
    </li>
    <li>
      <button (click)="handlePagination(this.pagePos + 1)" id="next" title="Próxima página"
        [attr.disabled]="pagePos == (pageLength-1)?'':null">
        &#62;
      </button>
    </li>
    <li class="info">
      {{tableLines.length}} resultado(s)
    </li>
  </ul>
</nav>
